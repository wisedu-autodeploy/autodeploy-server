{"version":3,"sources":["webpack:///./src/App.vue?6fcc","webpack:///./src/App.vue","webpack:///src/App.vue","webpack:///src/components/HelloWorld.vue","webpack:///./src/components/HelloWorld.vue?e22f","webpack:///./src/components/HelloWorld.vue","webpack:///src/components/DeployLog.vue","webpack:///./src/components/DeployLog.vue?8aa4","webpack:///./src/components/DeployLog.vue","webpack:///./src/router/index.js","webpack:///./src/main.js"],"names":["selectortype_template_index_0_src_App","render","_h","this","$createElement","_c","_self","attrs","id","staticRenderFns","src_App","__webpack_require__","normalizeComponent","created","ssrContext","HelloWorld","name","data","username","password","gitlabAppIndex","marathonAppIndex","gitlabApps","marathonApps","currentStep","logining","latestUUID","computed","hasLogin","length","selectedGitlabApp","selectedMarathonApp","logHref","location","href","split","methods","login","_this","asyncToGenerator_default","regenerator_default","a","mark","_callee","_ref","resData","code","message","wrap","_context","prev","next","store_legacy_default","set","axios_default","post","sent","$Message","error","content","abrupt","stop","deploy","_this2","_callee2","_ref2","_context2","maintainer","Maintainer","Name","marathon_id","marathon_name","toLowerCase","replace","uuid","$nextTick","_","window","open","prevStep","nextStep","userInfo","get","appData","mounted","components_HelloWorld","_vm","staticClass","staticStyle","margin-bottom","text-align","current","title","_v","display","flex-direction","align-items","directives","rawName","value","expression","width","placeholder","model","callback","$$v","type","margin-top","disabled","on","click","filterable","_l","item","index","key","_s","size","fix","_e","src_components_HelloWorld","HelloWorld_normalizeComponent","fromJS","DeployLog","$route","params","step","getIn","tag","image","status","wsUrl","host","ws","WebSocket","onopen","evt","send","onmessage","msg","JSON","parse","components_DeployLog","padding","font-size","font-weight","direction","src_components_DeployLog","DeployLog_normalizeComponent","vue_esm","use","vue_router_esm","router","routes","path","component","config","productionTip","iview_default","el","components","App","template"],"mappings":"iKAGAA,GADiBC,OAFjB,WAA0B,IAAaC,EAAbC,KAAaC,eAA0BC,EAAvCF,KAAuCG,MAAAD,IAAAH,EAAwB,OAAAG,EAAA,OAAiBE,OAAOC,GAAA,SAAYH,EAAA,oBAE5GI,oBCCjB,IAuBAC,EAvBAC,EAAA,OAcAC,ECPAC,QADA,cDUAb,GATA,EAVA,SAAAc,GACAH,EAAA,SAaA,KAEA,MAUA,mFEiCAI,GACAC,KAAA,aACAC,KAFA,WAGA,OACAC,SAAA,GACAC,SAAA,GACAC,eAAA,KACAC,iBAAA,KACAC,cACAC,gBAEAC,YAAA,EACAC,UAAA,EACAC,WAAA,KAGAC,UACAC,SADA,WAEA,OAAAzB,KAAAmB,WAAAO,OAAA,GAAA1B,KAAAoB,aAAAM,OAAA,GAEAC,kBAJA,WAKA,cAAA3B,KAAAiB,eACA,KAEAjB,KAAAmB,WAAAnB,KAAAiB,iBAGAW,oBAXA,WAYA,cAAA5B,KAAAkB,iBACA,KAEAlB,KAAAoB,aAAApB,KAAAkB,mBAGAW,QAlBA,WAoBA,OADAC,SAAAC,KAAAC,MAAA,MACA,mBAAAhC,KAAAuB,aAGAU,SACAC,MADA,WACA,IAAAC,EAAAnC,KAAA,OAAAoC,IAAAC,EAAAC,EAAAC,KAAA,SAAAC,IAAA,IAAAC,EAAAC,EAAAC,EAAA7B,EAAA8B,EAAA,OAAAP,EAAAC,EAAAO,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cACAC,EAAAX,EAAAY,IAAA,YACAnC,SAAAoB,EAAApB,SACAC,SAAAmB,EAAAnB,WAGAmB,EAAAb,UAAA,EANAwB,EAAAE,KAAA,EAOAG,EAAAb,EAAAc,KAAA,iBACArC,SAAAoB,EAAApB,SACAC,SAAAmB,EAAAnB,WATA,UAAAyB,EAAAK,EAAAO,KAOAX,EAPAD,EAOA3B,KAIAqB,EAAAb,UAAA,EACAqB,EAAAD,EAAAC,KAAA7B,EAAA4B,EAAA5B,KAAA8B,EAAAF,EAAAE,QACA,MAAAD,EAbA,CAAAG,EAAAE,KAAA,gBAcAb,EAAAmB,SAAAC,OACAC,QAAAZ,IAfAE,EAAAW,OAAA,kBAoBAR,EAAAX,EAAAY,IAAA,UAAApC,GACAqB,EAAAhB,WAAAL,EAAAK,YAAAgB,EAAAhB,WACAgB,EAAAf,aAAAN,EAAAM,cAAAe,EAAAf,aACAe,EAAAd,YAAA,EAvBA,yBAAAyB,EAAAY,SAAAlB,EAAAL,KAAAC,IAyBAuB,OA1BA,WA0BA,IAAAC,EAAA5D,KAAA,OAAAoC,IAAAC,EAAAC,EAAAC,KAAA,SAAAsB,IAAA,IAAAC,EAAApB,EAAAC,EAAA7B,EAAA8B,EAAA,OAAAP,EAAAC,EAAAO,KAAA,SAAAkB,GAAA,cAAAA,EAAAhB,KAAAgB,EAAAf,MAAA,cAAAe,EAAAf,KAAA,EACAG,EAAAb,EAAAc,KAAA,sBACArC,SAAA6C,EAAA7C,SACAC,SAAA4C,EAAA5C,SACAgD,WAAAJ,EAAAjC,kBAAAsC,WACApD,KAAA+C,EAAAjC,kBAAAuC,KACAC,YAAAP,EAAAhC,oBACAwC,cAAAR,EAAAhC,oBAAAyC,cAAAC,QAAA,qBAPA,UAAAR,EAAAC,EAAAV,KACAX,EADAoB,EACAhD,KAQA6B,EAAAD,EAAAC,KAAA7B,EAAA4B,EAAA5B,KAAA8B,EAAAF,EAAAE,QACA,MAAAD,EAVA,CAAAoB,EAAAf,KAAA,eAWAY,EAAAN,SAAAC,OACAC,QAAAZ,IAZAmB,EAAAN,OAAA,iBAgBAG,EAAArC,WAAAT,EAAAyD,KAEAX,EAAAY,UAAA,SAAAC,GACAC,OAAAC,KAAAf,EAAA/B,WAnBA,yBAAAkC,EAAAL,SAAAG,EAAAD,KAAAxB,IAsBAwC,SAhDA,WAiDA5E,KAAAqB,aAAA,GAEAwD,SAnDA,WAoDA7E,KAAAqB,aAAA,IAGAX,QA9FA,WA+FA,IAAAoE,EAAA7B,EAAAX,EAAAyC,IAAA,eACAC,EAAA/B,EAAAX,EAAAyC,IAAA,gBACA/E,KAAAe,SAAA+D,EAAA/D,SACAf,KAAAgB,SAAA8D,EAAA9D,SAEAgE,GACAhF,KAAAmB,WAAA6D,EAAA7D,WACAnB,KAAAoB,aAAA4D,EAAA5D,aACApB,KAAAqB,YAAA,GAEArB,KAAAe,UAAAf,KAAAgB,SACAhB,KAAAkC,QAEAlC,KAAAqB,YAAA,GAMA4D,QAlHA,cCxDAC,GADiBpF,OAFjB,WAA0B,IAAAqF,EAAAnF,KAAaD,EAAAoF,EAAAlF,eAA0BC,EAAAiF,EAAAhF,MAAAD,IAAAH,EAAwB,OAAAG,EAAA,OAAiBkF,YAAA,UAAoBlF,EAAA,OAAYmF,aAAaC,gBAAA,OAAAC,aAAA,YAA8CrF,EAAA,SAAcE,OAAOoF,QAAAL,EAAA9D,eAA2BnB,EAAA,QAAaE,OAAOqF,MAAA,KAAAjC,QAAA,eAAoC2B,EAAAO,GAAA,KAAAxF,EAAA,QAAyBE,OAAOqF,MAAA,KAAAjC,QAAA,aAAiC,OAAA2B,EAAAO,GAAA,KAAAxF,EAAA,OAAgCmF,aAAaM,QAAA,OAAAC,iBAAA,SAAAC,cAAA,YAAmE3F,EAAA,OAAY4F,aAAajF,KAAA,OAAAkF,QAAA,SAAAC,MAAA,IAAAb,EAAA9D,YAAA4E,WAAA,sBAA0FZ,aAAea,MAAA,WAAiBhG,EAAA,SAAcE,OAAO+F,YAAA,YAAyBC,OAAQJ,MAAAb,EAAA,SAAAkB,SAAA,SAAAC,GAA8CnB,EAAApE,SAAAuF,GAAiBL,WAAA,cAAwBd,EAAAO,GAAA,KAAAxF,EAAA,SAA0BE,OAAO+F,YAAA,WAAAI,KAAA,YAA2CH,OAAQJ,MAAAb,EAAA,SAAAkB,SAAA,SAAAC,GAA8CnB,EAAAnE,SAAAsF,GAAiBL,WAAA,cAAwBd,EAAAO,GAAA,KAAAxF,EAAA,OAAwBmF,aAAamB,aAAA,SAAoBtG,EAAA,UAAeE,OAAOmG,KAAA,UAAAE,UAAAtB,EAAA1D,UAA0CiF,IAAKC,MAAAxB,EAAAN,YAAsBM,EAAAO,GAAA,SAAAP,EAAAO,GAAA,KAAAxF,EAAA,UAA2CE,OAAOmG,KAAA,WAAiBG,IAAKC,MAAAxB,EAAAjD,SAAmBiD,EAAAO,GAAA,gBAAAP,EAAAO,GAAA,KAAAxF,EAAA,OAA+C4F,aAAajF,KAAA,OAAAkF,QAAA,SAAAC,MAAA,IAAAb,EAAA9D,YAAA4E,WAAA,sBAA0FZ,aAAea,MAAA,WAAiBhG,EAAA,UAAeE,OAAO+F,YAAA,eAAAS,WAAA,IAA6CR,OAAQJ,MAAAb,EAAA,eAAAkB,SAAA,SAAAC,GAAoDnB,EAAAlE,eAAAqF,GAAuBL,WAAA,mBAA8Bd,EAAA0B,GAAA1B,EAAA,oBAAA2B,EAAAC,GAA8C,OAAA7G,EAAA,UAAoB8G,IAAAF,EAAA7C,WAAA,IAAA6C,EAAA5C,KAAA9D,OAA6C4F,MAAAe,KAAe5B,EAAAO,GAAA,iBAAAP,EAAA8B,GAAAH,EAAA7C,WAAA,IAAA6C,EAAA5C,MAAA,qBAAsFiB,EAAAO,GAAA,KAAAxF,EAAA,UAA4BE,OAAO+F,YAAA,iBAAAS,WAAA,IAA+CR,OAAQJ,MAAAb,EAAA,iBAAAkB,SAAA,SAAAC,GAAsDnB,EAAAjE,iBAAAoF,GAAyBL,WAAA,qBAAgCd,EAAA0B,GAAA1B,EAAA,sBAAA2B,EAAAC,GAAgD,OAAA7G,EAAA,UAAoB8G,IAAAF,EAAA1G,OAAgB4F,MAAAe,KAAe5B,EAAAO,GAAA,iBAAAP,EAAA8B,GAAAH,GAAA,qBAAyD3B,EAAAO,GAAA,KAAAxF,EAAA,OAAyBmF,aAAamB,aAAA,SAAoBtG,EAAA,UAAeE,OAAOmG,KAAA,WAAiBG,IAAKC,MAAAxB,EAAAP,YAAsBO,EAAAO,GAAA,SAAAP,EAAAO,GAAA,KAAAxF,EAAA,UAA2CE,OAAOmG,KAAA,WAAiBG,IAAKC,MAAAxB,EAAAxB,UAAoBwB,EAAAO,GAAA,kBAAAP,EAAAO,GAAA,KAAAP,EAAA,SAAAjF,EAAA,QAAiEE,OAAO8G,KAAA,QAAAC,IAAA,MAAyBhC,EAAAiC,MAAA,IAEn2E9G,oBCCjB,IAuBA+G,EAvBA7G,EAAA,OAcA8G,CACA1G,EACAsE,GATA,EAVA,SAAAvE,GACAH,EAAA,SAaA,kBAEA,MAUA,QCLA+G,EAAA/G,EAAA,QAAA+G,OACAC,GACA1G,KADA,WAEA,OACAA,KAAAyG,QAGA/F,UACA+C,KADA,WAEA,OAAAvE,KAAAyH,OAAAC,OAAAnD,MAEAoD,KAJA,WAKA,OAAA3H,KAAAc,KAAA8G,OAAA,mBAEAnC,MAPA,WAWA,OAHAzF,KAAAc,KAAA8G,OAAA,kCAGA,IAFA5H,KAAAc,KAAA8G,OAAA,4BAEA,OADA5H,KAAAc,KAAA8G,OAAA,sCAGAC,IAbA,WAcA,OAAA7H,KAAAc,KAAA8G,OAAA,mBAEAE,MAhBA,WAiBA,OAAA9H,KAAAc,KAAA8G,OAAA,qBAEAG,OAnBA,WAoBA,IAAAA,EAAA/H,KAAAc,KAAA8G,OAAA,oBACA,OAAAG,GACA,yBACA,uBACA,uBACA,sBACA,+BAIArH,QApCA,WAoCA,IAAAyB,EAAAnC,KACAgI,EAAA,QAAAlG,SAAAmG,KAAA,WAAAjI,KAAAuE,KACA2D,EAAA,IAAAC,UAAAH,GACAE,EAAAE,OAAA,SAAAC,GACAH,EAAAI,KAAAnG,EAAAoC,OAEA2D,EAAAK,UAAA,SAAAC,GACArG,EAAArB,KAAAyG,EAAAkB,KAAAC,MAAAF,EAAA1H,UC9DA6H,GADiB7I,OAFjB,WAA0B,IAAAqF,EAAAnF,KAAaD,EAAAoF,EAAAlF,eAA0BC,EAAAiF,EAAAhF,MAAAD,IAAAH,EAAwB,OAAAG,EAAA,OAAiBmF,aAAauD,QAAA,OAAAjD,QAAA,OAAAC,iBAAA,SAAAC,cAAA,YAAoF3F,EAAA,OAAYkF,YAAA,QAAAC,aAAiCwD,YAAA,OAAAvD,gBAAA,OAAAwD,cAAA,UAAgE3D,EAAAO,GAAAP,EAAA8B,GAAA9B,EAAAM,UAAAN,EAAAO,GAAA,KAAAxF,EAAA,OAAoDmF,aAAaM,QAAA,UAAkBzF,EAAA,SAAcE,OAAOoF,QAAAL,EAAAwC,KAAAoB,UAAA,cAA2C7I,EAAA,QAAaE,OAAOqF,MAAA,SAAAjC,QAAA2B,EAAA0C,OAAoC1C,EAAAO,GAAA,KAAAxF,EAAA,QAAyBE,OAAOqF,MAAA,WAAAjC,QAAA2B,EAAA2C,SAAwC3C,EAAAO,GAAA,KAAAxF,EAAA,QAAyBE,OAAOqF,MAAA,YAAAjC,QAAA,eAA2C2B,EAAAO,GAAA,KAAAxF,EAAA,QAAyBE,OAAOqF,MAAA,SAAAjC,QAAA,aAAqC,GAAA2B,EAAAO,GAAA,KAAAxF,EAAA,OAA4BkF,YAAA,SAAAC,aAAkCa,MAAA,WAAiBf,EAAAO,GAAA,kBAAAP,EAAA8B,GAAA9B,EAAA4C,QAAA,mBAEzxBzH,oBCqBjB0I,EAvBAxI,EAAA,OAcAyI,CACAzB,EACAmB,GATA,EAEA,KAEA,KAEA,MAUA,QClBAO,EAAA,QAAIC,IAAIC,EAAA,GAER,IAAAC,EAAA,IAAmBD,EAAA,GACjBE,SAEIC,KAAM,IACN1I,KAAM,aACN2I,UAAWnC,IAGXkC,KAAM,oBACN1I,KAAM,YACN2I,UAAWR,qCCTjBE,EAAA,QAAIO,OAAOC,eAAgB,EAC3BR,EAAA,QAAIC,IAAIQ,EAAArH,GAGR,IAAI4G,EAAA,SACFU,GAAI,OACJP,SACAQ,YAAcC,IAAAvJ,GACdwJ,SAAU","file":"static/js/app.f85430490f0ab2337c9b.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{attrs:{\"id\":\"app\"}},[_c('router-view')],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-729d4c5c\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/App.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-729d4c5c\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../node_modules/vue-loader/lib/selector?type=styles&index=0!./App.vue\")\n}\nvar normalizeComponent = require(\"!../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\nimport __vue_script__ from \"!!babel-loader!../node_modules/vue-loader/lib/selector?type=script&index=0!./App.vue\"\n/* template */\nimport __vue_template__ from \"!!../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-729d4c5c\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../node_modules/vue-loader/lib/selector?type=template&index=0!./App.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/App.vue\n// module id = null\n// module chunks = ","<template>\n  <div id=\"app\">\n    <router-view/>\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\n\nexport default {\n  created() {\n  }\n}\n</script>\n\n<style>\n#app {\n  color: #2c3e50;\n  padding-top: 16px;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/App.vue","<template>\n  <div class=\"hello\">\n    <div style=\"margin-bottom: 16px; text-align:center;\">\n      <Steps :current=\"currentStep\">\n          <Step title=\"登录\" content=\"登录 gitlab\"></Step>\n          <Step title=\"部署\" content=\"选择项目部署\"></Step>\n      </Steps>\n    </div>\n\n    <div style=\"display: flex; flex-direction: column; align-items: center;\">\n      <div v-show=\"currentStep === 0\" style=\"width: 400px;\">\n        <Input v-model=\"username\" placeholder=\"username\"></Input>\n        <Input v-model=\"password\" placeholder=\"password\" type=\"password\"></Input>\n        <div style=\"margin-top: 8px;\">\n          <Button type=\"default\" :disabled=\"!hasLogin\" @click=\"nextStep\">下一步</Button>\n          <Button type=\"primary\" @click=\"login\">登录</Button>\n        </div>\n\n      </div>\n\n      <div v-show=\"currentStep === 1\" style=\"width: 400px;\">\n        <Select v-model=\"gitlabAppIndex\" placeholder=\"选择 gitlab 项目\" filterable>\n            <Option\n              v-for=\"(item, index) in gitlabApps\"\n              :value=\"index\"\n              :key=\"item.Maintainer + '/' + item.Name\">\n              {{ item.Maintainer + '/' + item.Name }}\n            </Option>\n        </Select>\n        <Select v-model=\"marathonAppIndex\" placeholder=\"选择 marathon 项目\" filterable>\n            <Option\n              v-for=\"(item, index) in marathonApps\"\n              :value=\"index\"\n              :key=\"item\">\n              {{ item }}\n            </Option>\n        </Select>\n\n        <div style=\"margin-top: 8px;\">\n          <Button type=\"default\" @click=\"prevStep\">上一步</Button>\n          <Button type=\"primary\" @click=\"deploy\">部署</Button>\n          <!-- <a :href=\"logHref\" target=\"_blank\">部署</a> -->\n        </div>\n\n        <!-- <div style=\"margin-top: 8px;\">\n          <a :href=\"logHref\" target=\"_blank\">查看日志</a>\n        </div> -->\n      </div>\n\n    </div>\n\n    <Spin size=\"large\" fix v-if=\"logining\"></Spin>\n\n  </div>\n</template>\n\n<script>\nimport axios from 'axios'\nimport store from 'store'\nexport default {\n  name: 'HelloWorld',\n  data () {\n    return {\n      username: '',\n      password: '',\n      gitlabAppIndex: null,\n      marathonAppIndex: null,\n      gitlabApps: [],\n      marathonApps: [],\n\n      currentStep: 0,\n      logining: false,\n      latestUUID: '',\n    }\n  },\n  computed: {\n    hasLogin() {\n      return this.gitlabApps.length > 0 || this.marathonApps.length > 0\n    },\n    selectedGitlabApp() {\n      if (this.gitlabAppIndex === null) {\n        return null\n      } else {\n        return this.gitlabApps[this.gitlabAppIndex]\n      }\n    },\n    selectedMarathonApp() {\n      if (this.marathonAppIndex === null) {\n        return null\n      } else {\n        return this.marathonApps[this.marathonAppIndex]\n      }\n    },\n    logHref() {\n      const splices = location.href.split(\"#/\")\n      return splices[0] + \"#\" + \"/deploy-log/\" + this.latestUUID\n    },\n  },\n  methods: {\n    async login() {\n      store.set('userInfo', {\n        username: this.username,\n        password: this.password,\n      })\n\n      this.logining = true\n      const {data: resData } = await axios.post(\"/v1/api/login\", {\n        username: this.username,\n        password: this.password,\n      })\n      this.logining = false\n      const {code, data, message} = resData\n      if (code !== '0') {\n        this.$Message.error({\n          content: message\n        })\n        return\n      }\n\n      store.set('appData', data)\n      this.gitlabApps = data.gitlabApps || this.gitlabApps\n      this.marathonApps = data.marathonApps || this.marathonApps\n      this.currentStep = 1\n    },\n    async deploy() {\n      const {data: resData} = await axios.post(\"/v1/api/autodeploy\", {\n        \tusername: this.username,\n          password: this.password,\n          maintainer: this.selectedGitlabApp.Maintainer,\n          name: this.selectedGitlabApp.Name,\n          marathon_id: this.selectedMarathonApp,\n          marathon_name: this.selectedMarathonApp.toLowerCase().replace(/[^0-9a-z-]/g, '-')\n      })\n      const {code, data, message} = resData\n      if (code !== '0') {\n        this.$Message.error({\n          content: message\n        })\n        return\n      }\n      this.latestUUID = data.uuid\n\n      this.$nextTick(_ => {\n        window.open(this.logHref)\n      })\n    },\n    prevStep() {\n      this.currentStep -= 1\n    },\n    nextStep() {\n      this.currentStep += 1\n    },\n  },\n  created() {\n    const userInfo = store.get('userInfo', {})\n    const appData = store.get('appData', null)\n    this.username = userInfo.username\n    this.password = userInfo.password\n\n    if (appData) {\n      this.gitlabApps = appData.gitlabApps\n      this.marathonApps = appData.marathonApps\n      this.currentStep = 1\n    } else {\n      if (this.username && this.password) {\n        this.login()\n      } else {\n        this.currentStep = 0\n      }\n    }\n\n\n  },\n  mounted() {\n  },\n}\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style scoped>\nh1, h2 {\n  font-weight: normal;\n}\nul {\n  list-style-type: none;\n  padding: 0;\n}\nli {\n  display: inline-block;\n  margin: 0 10px;\n}\na {\n  color: #42b983;\n}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/components/HelloWorld.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"hello\"},[_c('div',{staticStyle:{\"margin-bottom\":\"16px\",\"text-align\":\"center\"}},[_c('Steps',{attrs:{\"current\":_vm.currentStep}},[_c('Step',{attrs:{\"title\":\"登录\",\"content\":\"登录 gitlab\"}}),_vm._v(\" \"),_c('Step',{attrs:{\"title\":\"部署\",\"content\":\"选择项目部署\"}})],1)],1),_vm._v(\" \"),_c('div',{staticStyle:{\"display\":\"flex\",\"flex-direction\":\"column\",\"align-items\":\"center\"}},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentStep === 0),expression:\"currentStep === 0\"}],staticStyle:{\"width\":\"400px\"}},[_c('Input',{attrs:{\"placeholder\":\"username\"},model:{value:(_vm.username),callback:function ($$v) {_vm.username=$$v},expression:\"username\"}}),_vm._v(\" \"),_c('Input',{attrs:{\"placeholder\":\"password\",\"type\":\"password\"},model:{value:(_vm.password),callback:function ($$v) {_vm.password=$$v},expression:\"password\"}}),_vm._v(\" \"),_c('div',{staticStyle:{\"margin-top\":\"8px\"}},[_c('Button',{attrs:{\"type\":\"default\",\"disabled\":!_vm.hasLogin},on:{\"click\":_vm.nextStep}},[_vm._v(\"下一步\")]),_vm._v(\" \"),_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.login}},[_vm._v(\"登录\")])],1)],1),_vm._v(\" \"),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.currentStep === 1),expression:\"currentStep === 1\"}],staticStyle:{\"width\":\"400px\"}},[_c('Select',{attrs:{\"placeholder\":\"选择 gitlab 项目\",\"filterable\":\"\"},model:{value:(_vm.gitlabAppIndex),callback:function ($$v) {_vm.gitlabAppIndex=$$v},expression:\"gitlabAppIndex\"}},_vm._l((_vm.gitlabApps),function(item,index){return _c('Option',{key:item.Maintainer + '/' + item.Name,attrs:{\"value\":index}},[_vm._v(\"\\n            \"+_vm._s(item.Maintainer + '/' + item.Name)+\"\\n          \")])})),_vm._v(\" \"),_c('Select',{attrs:{\"placeholder\":\"选择 marathon 项目\",\"filterable\":\"\"},model:{value:(_vm.marathonAppIndex),callback:function ($$v) {_vm.marathonAppIndex=$$v},expression:\"marathonAppIndex\"}},_vm._l((_vm.marathonApps),function(item,index){return _c('Option',{key:item,attrs:{\"value\":index}},[_vm._v(\"\\n            \"+_vm._s(item)+\"\\n          \")])})),_vm._v(\" \"),_c('div',{staticStyle:{\"margin-top\":\"8px\"}},[_c('Button',{attrs:{\"type\":\"default\"},on:{\"click\":_vm.prevStep}},[_vm._v(\"上一步\")]),_vm._v(\" \"),_c('Button',{attrs:{\"type\":\"primary\"},on:{\"click\":_vm.deploy}},[_vm._v(\"部署\")])],1)],1)]),_vm._v(\" \"),(_vm.logining)?_c('Spin',{attrs:{\"size\":\"large\",\"fix\":\"\"}}):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-ce5e3e8c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/HelloWorld.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-ce5e3e8c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../node_modules/vue-loader/lib/selector?type=styles&index=0!./HelloWorld.vue\")\n}\nvar normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./HelloWorld.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./HelloWorld.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-ce5e3e8c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./HelloWorld.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-ce5e3e8c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/HelloWorld.vue\n// module id = null\n// module chunks = ","<template>\n  <div style=\"padding: 16px;\n              display: flex;\n              flex-direction: column;\n              align-items: center;\">\n    <div style=\"font-size: 16px; margin-bottom: 16px; font-weight: bold;\" class=\"title\">{{title}}</div>\n    <div style=\"display: flex;\">\n      <Steps :current=\"step\" direction=\"vertical\">\n        <Step title=\"TAGING\" :content=\"tag\"></Step>\n        <Step title=\"BUILDING\" :content=\"image\"></Step>\n        <Step title=\"DEPLOYING\" content=\"DEPLOYING\"></Step>\n        <Step title=\"FINISH\" content=\"FINISH\"></Step>\n      </Steps>\n      <div class=\"status\" style=\"width: 250px;\">\n        STATUS：{{status}}\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nconst { fromJS } = require('immutable')\nexport default {\n  data() {\n    return {\n      data: fromJS({}),\n    }\n  },\n  computed: {\n    uuid() {\n      return this.$route.params.uuid\n    },\n    step() {\n      return this.data.getIn(['data', 'step'], 0)\n    },\n    title() {\n      const maintainer = this.data.getIn(['data', 'params', 'maintainer'], '')\n      const projectName = this.data.getIn(['data', 'params', 'name'], '')\n      const marathonName = this.data.getIn(['data', 'params', 'marathon_name'], '')\n      return `${maintainer}/${projectName} -> ${marathonName}`\n    },\n    tag() {\n      return this.data.getIn(['data', 'tag'], '')\n    },\n    image() {\n      return this.data.getIn(['data', 'image'], '')\n    },\n    status() {\n      const status = this.data.getIn(['data', 'status'], 0)\n      switch (status) {\n        case 0: return 'NOT START'\n        case 1: return 'RUNNING'\n        case 2: return 'SUCCEED'\n        case -1: return 'FAILED'\n        default: return 'I DONT KNOW'\n      }\n    }\n  },\n  created() {\n    const wsUrl = `ws://${location.host}/deploy/${this.uuid}`\n    const ws = new WebSocket(wsUrl)\n    ws.onopen = (evt) => {\n      ws.send(this.uuid) // 开始部署\n    }\n    ws.onmessage = (msg) => {\n      this.data = fromJS(JSON.parse(msg.data))\n    }\n  }\n}\n</script>\n\n\n\n\n// WEBPACK FOOTER //\n// src/components/DeployLog.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticStyle:{\"padding\":\"16px\",\"display\":\"flex\",\"flex-direction\":\"column\",\"align-items\":\"center\"}},[_c('div',{staticClass:\"title\",staticStyle:{\"font-size\":\"16px\",\"margin-bottom\":\"16px\",\"font-weight\":\"bold\"}},[_vm._v(_vm._s(_vm.title))]),_vm._v(\" \"),_c('div',{staticStyle:{\"display\":\"flex\"}},[_c('Steps',{attrs:{\"current\":_vm.step,\"direction\":\"vertical\"}},[_c('Step',{attrs:{\"title\":\"TAGING\",\"content\":_vm.tag}}),_vm._v(\" \"),_c('Step',{attrs:{\"title\":\"BUILDING\",\"content\":_vm.image}}),_vm._v(\" \"),_c('Step',{attrs:{\"title\":\"DEPLOYING\",\"content\":\"DEPLOYING\"}}),_vm._v(\" \"),_c('Step',{attrs:{\"title\":\"FINISH\",\"content\":\"FINISH\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"status\",staticStyle:{\"width\":\"250px\"}},[_vm._v(\"\\n      STATUS：\"+_vm._s(_vm.status)+\"\\n    \")])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-5073ba16\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/components/DeployLog.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./DeployLog.vue\"\nimport __vue_script__ from \"!!babel-loader!../../node_modules/vue-loader/lib/selector?type=script&index=0!./DeployLog.vue\"\n/* template */\nimport __vue_template__ from \"!!../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-5073ba16\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../node_modules/vue-loader/lib/selector?type=template&index=0!./DeployLog.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/components/DeployLog.vue\n// module id = null\n// module chunks = ","import Vue from 'vue'\nimport Router from 'vue-router'\nimport HelloWorld from '@/components/HelloWorld'\nimport DeployLog from '@/components/DeployLog'\n\nVue.use(Router)\n\nexport default new Router({\n  routes: [\n    {\n      path: '/',\n      name: 'HelloWorld',\n      component: HelloWorld\n    },\n    {\n      path: '/deploy-log/:uuid',\n      name: 'DeployLog',\n      component: DeployLog\n    }\n  ]\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/router/index.js","// The Vue build version to load with the `import` command\n// (runtime-only or standalone) has been set in webpack.base.conf with an alias.\nimport Vue from 'vue'\nimport App from './App'\nimport router from './router'\nimport iView from 'iview'\nimport 'iview/dist/styles/iview.css'\n\nVue.config.productionTip = false\nVue.use(iView)\n\n/* eslint-disable no-new */\nnew Vue({\n  el: '#app',\n  router,\n  components: { App },\n  template: '<App/>'\n})\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}